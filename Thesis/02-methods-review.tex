\chapter{Теоретический обзор методов восстановления 3D-моделей}

\section{Постановка задачи 3D-восстановления}

Качественно выполненная огранка драгоценного камня существенно повышает
стоимость ювелирного изделия, в то же время неправильная огранка негативно
влияет на эстетическое восприятие. Для минимизации человеческого
фактора и для ускорения процесса желателен нейросетевой метод реконструкции,
который мог бы использовать серию снимков для автоматического получения
высокоточной трехмерной модели камня. Это позволяет мастеру мгновенно сравнивать
получаемый результат с исходной моделью и оперативно корректировать действия для
достижения идеальной формы.

В то же время, в археологии имеются принципиально иные предпосылки для задачи
восстановления трехмерных моделей. Здесь трехмерная реконструкция нужна не
столько для достижения точности соответствия эталонной геометрии, сколько для
идентификации личности по черепу, изучения анатомических особенностей,
проведения антропологических исследований и судебно-медицинских экспертиз. Целью
является реконструкция полной и детализированной модели объекта, даже если
исходные данные неполны или повреждены. Метод должен быть устойчив к шумам и
потерям информации, и при этом позволять визуализировать максимально
информативную трехмерную модель.

Противопоставляя две эти задачи, следует отметить, что восстановление геометрии
драгоценного камня требует высокой точности и низкой погрешности реконструкции. В то же
время, реконструкция археологического объекта, такого как череп, направлена
прежде всего на целостность и реалистичность итоговой модели, которая будет
использоваться в дальнейших экспертных исследованиях и идентификации, где точное
соответствие исходной форме не всегда возможно и не является основной целью.

Таким образом, для эффективного решения обеих задач необходимы различные подходы
к трехмерному моделированию: для огранки камней приоритетом является
высокоточная геометрическая реконструкция, в то время как в археологической
задаче реконструкции черепов важна полная, визуально реалистичная модель,
способная корректно отразить исходную структуру и особенности, даже в условиях
частичной потери исходных данных.

\section{Традиционные и современные подходы}

\subsection{Стереоскопическое изображение (стереопара)}

Стереоскопическая съемка (\cite{ussr1981phototech}) основана на использовании
двух съёмочных систем (или двух изображений), фиксирующих сцену с разных точек.
Такая система позволяет определить относительное положение предметов по признаку
параллакса — смещению изображения объектов ближнего плана относительно фона при
изменении точки наблюдения.  Основная задача — определить пары соответствующих
точек на левом и правом изображениях и вычислить так называемое смещение (англ.
disparity), т. е.  разность координат этих точек вдоль горизонтальной оси.
Расстояние до объекта (глубина сцены) $Z$ обратно пропорционально смещению: $Z =
\frac{f \cdot B}{d}$, где $f$ — фокусное расстояние объектива, $B$ — база
(расстояние между оптическими осями камер), $d$ — смещение.

Также стереометрические методы опираются на законы эпиполярной геометрии,
согласно которым соответствующие точки лежат на эпиполярных линиях, взаимное
расположение которых описывается фундаментальной матрицей (\cite{Hartley:2003:MVG:861369}).

В простейших реализациях применяются методы блочного сравнения (например, по
критерию суммы квадратов отклонений, коэффициенту взаимной корреляции и др.).
Более совершенные методы используют глобальную оптимизацию (например, на основе
динамического программирования, графовых моделей и пр.). Каждый из предложенных
развитий метода несет свои достоинства и недостатки
(\cite{kok2019reviewonsterevision}). Рассмотрим достоинства и ограничения
для алгоритма в общем случае.

\textbf{Достоинства:} стереофотограмметрия сравнительно легко реализуема и
хорошо изучена. Такие методы широко применяются, в том числе в навигации и
системах помощи водителю, а также в киноиндустрии. Современные алгоритмы
достигают высокой точности (точность сопоставления превышает 95\%,
\cite{fsian2022comparisonstereomatchingalgorithms}).

\textbf{Недостатки:} метод требует наличия перекрывающихся изображений и
наличия текстуры. В однородных или повторяющихся участках возникают ошибки
сопоставления. Также проблемы возникают на границах объектов (из-за взаимных
затенений, англ. occlusions), а также при съёмке прозрачных или зеркальных
объектов, где нарушается фотометрическое соответствие. Методы
стереофотограмметрии, как правило, предполагают ламбертов характер отражения,
что делает их неприменимыми для оптически сложных поверхностей.

\subsection{Многовидовая реконструкция (Multi-View Stereo, MVS)}

Методы многовидового восстановления пространственной формы сцены (англ.
Multi-View Stereo, сокращённо MVS) представляют собой обобщение
стереоскопических методов на случай более чем двух изображений ($>2$). Целью
является построение плотной трёхмерной модели сцены на основе серии снимков,
полученных с различных точек обзора.

Среди направлений многовидовой реконструкции есть несколько популярных:

\begin{enumerate}
	\item Методы, основанные на построении визуальной оболочки (\cite{10.1109/34.273735})
	и дискретизации объёма объекта на элементы регулярной пространственной сетки —
	воксели. Типичные примеры: методы окрашивания вокселей (\cite{10.5555/794189.794361}),
	отсечения несогласованных частей (\cite{10.5555/898435}). Эти подходы последовательно
	исключают из объёма те области, проекции которых на снимки противоречат
	наблюдаемому изображению.

	\item Многослойные или гибридные подходы, в которых модель сцены
	представляется совокупностью параллельных пластов (\cite{10.1109/CVPR.1998.698642}).

	\item Поверхностные методы, использующие локальные участки изображения
	(`патчи') для восстановления точек /
	сеток в пространстве (\cite{10.1109/CVPR.2007.383246}).

\end{enumerate}

\textbf{Преимущества:} многовидовая реконструкция позволяет восстанавливать
детализированные трёхмерные модели сложных объектов, особенно при наличии
большого количества снимков с различными ракурсами. При благоприятных условиях
(матовые объекты, выраженная текстура, высокая точность съёмки) точность может
соперничать с результатами лазерного сканирования.

\textbf{Недостатки:} по сравнению с классическим стерео, многовидовая
реконструкция требует значительно больших вычислительных ресурсов. Поиск
соответствий выполняется сразу между несколькими изображениями, а сама задача
восстановления поверхности — в общем случае нелинейна и решается приближённо.
Также, как и в случае двухкамерной стереосъёмки, фотометрическое согласие
нарушается при съёмке прозрачных или зеркальных поверхностей, что делает такие
объекты трудновосстановимыми без специальных ухищрений.

Алгоритмы многовидовой реконструкции, как правило, предполагают, что параметры
камер (их расположение и внутренние параметры) известны заранее. Часто для их
оценки используется предварительный этап восстановления структуры сцены из
движения (см. ниже SfM).

К современным решениям, реализующим многовидовую реконструкцию,
относится, например, система COLMAP (\cite{schoenberger2016mvs}), объединяющая этапы определения параметров
камер и построения трёхмерной модели по множеству изображений в едином
автоматизированном процессе.

На испытаниях — бенчмарках — (например, \cite{Knapitsch2017}) классические методы многовидовой
реконструкции демонстрируют высокую точность для непрозрачных объектов. Однако
для восстановления геометрии прозрачных тел, таких как драгоценные камни,
традиционные подходы оказываются малоэффективными без дополнительной информации
или специальных методов.

\subsection{Томографическая реконструкция}
\subsection{Structure from Motion (SfM)}
\subsection{Визуальная одометрия (Visual Odometry)}
\subsection{Восстановление по силуэтам (Shape from Silhouette)}
\subsection{Фотометрические методы (Photometric Stereo)}
\subsection{Активные методы реконструкции}

\section{Нейросетевые методы 3D-реконструкции}

